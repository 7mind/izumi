# https://aka.ms/yaml

pr:
  branches:
    include:
    - '*'

trigger:
  tags:
    include:
      - v*
  branches:
    include:
      - develop
      - series/*

variables:
  - group: security-tokens
  - name: COURSIER_CACHE
    value: $(Pipeline.Workspace)/.coursier
  - name: IVY_CACHE_FOLDER
    value: $(Pipeline.Workspace)/.ivy2

jobs:
  - template: .azure-dockerstep.yml
    parameters:
      jobs:
        - job: publish212
          displayName: 'Publish to Maven Central (2.12)'
          steps:
            - script: |
                bash sbtgen.sc --js && bash .build.sh 2.12 secrets publishScala
        - job: publish213
          displayName: 'Publish to Maven Central (2.13)'
          steps:
            - script: |
                bash sbtgen.sc --js && bash .build.sh 2.13 secrets publishScala
