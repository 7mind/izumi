---
out: index.html
---
Idealingua DML/IDL
==================

The following examples will show what IdeaLingua looks like and how to use it to connect your distributed application.

## Pet Store

See [izumi-petstore](https://github.com/kaishh/izumi-petstore) project for complete samples in Scala, TypeScript and other languages.

## User Service

Example definition of a user database service:

```
package user.api

enum Gender = Male | Female

id EntityID {
  uuid: uuid
}

mixin Entity {
  id: EntityID
}

mixin Person {
  name: str
  surname: str
  gender: Gender
}

data User {
  & Entity
  + Person
  password: str
}

data PublicUser {
  + User
  - password: str
}

adt Result = Success | Failure

data Success {
  message: str
}

data Failure {
  code: int8
}

service UserService {
  def saveUser(user: User): Result
  def findUserByName(name: str): list[PublicUser] | Failure
}
```

# Installation

## Using the standalone compiler

The compiler executable is built as an uberjar and published on [Maven Central](https://search.maven.org/).

The preferred way to install the compiler is with [coursier](https://github.com/coursier/coursier#command-line)

@@@vars

```bash
# install release executable
coursier bootstrap com.github.pshirshov.izumi.r2:idealingua-compiler_2.12:$izumi.version$ -o idlc

./idlc --help
```

@@@

To install snapshot:

```bash
# install snapshot
coursier bootstrap -r https://oss.sonatype.org/content/repositories/snapshots/ com.github.pshirshov.izumi.r2:idealingua-compiler_2.12:0.6.0-SNAPSHOT -o idlc

./idlc --help
```

Commandline examples:

```
./idlc -s src -t target -L scala=* -L typescript=*
```

```
./idlc -s src -t target -L scala=-AnyvalExtension -L typescript=*
```

## Using SBT Plugin

Add the following to your `project/plugins.sbt` file:

@@@vars

```scala
val izumi_version = "$izumi.version$"
addSbtPlugin("com.github.pshirshov.izumi.r2" % "sbt-idealingua" % izumi_version)
```

@@@

Place your domain definitions into `/src/main/izumi` directory, then enable the plugin for that project: 

```scala
izumiProject.enablePlugins(IdealinguaPlugin)
```

You can depend on the code generated by Idealinguain in your other Scala projects:

```scala
project.dependsOn(izumiProject)
```

## Scala http4s Transport

Most likely you will need to use [Kind Projector](https://github.com/non/kind-projector) compiler plugin and enable partial unification:

```scala
scalacOptions += "-Ypartial-unification"

resolvers += Resolver.sonatypeRepo("releases")

addCompilerPlugin("org.spire-math" % "kind-projector" % "0.9.6" cross CrossVersion.binary)
``` 

You may find a test suite for the whole http4s pipeline [here](blob/develop/idealingua/idealingua-runtime-rpc-http4s/src/test/scala/com/github/pshirshov/izumi/idealingua/runtime/rpc/http4s/Http4sServer.scala).

Please note that service definitons for the test suite are _not_ generated from Idealingua definitions, you can find the Scala sources [here](https://github.com/pshirshov/izumi-r2/tree/develop/idealingua/idealingua-test-defs/src/main/scala/com/github/pshirshov/izumi/r2/idealingua/test).

@@@ index

* [Language Syntax and Types Reference](language-reference.md)
* [JSON Wire Format Specification](json.md)
* [Scala Codegen: Examples of generated code in Scala](cogen.md)
* [Scala Codegen: JSON codecs generated by Scala Circe plugin](cogen-circe.md)

@@@
