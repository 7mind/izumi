---
out: index.html
---
IdeaLingua RPC & Domain Modeling Language
==================

IdeaLingua is an RPC framework & Domain Modeling Language, it's purpose is to:

* Publish APIs & data definitions in a common format and create idiomatic API clients and servers in any language.
* Enable remote calls to service via their public API definitions.
* Abstract irrelevant details such as network protocol and serialization format.
* Deliver our souls from REST and its brittle boilerplate.

## User Service Example

Example definition of a user database service:

```
package user.api

enum Gender = Male | Female

id EntityID {
  uuid: uuid
}

mixin Entity {
  id: EntityID
}

mixin Person {
  name: str
  surname: str
  gender: Gender
}

data User {
  & Entity
  + Person
  password: str
}

data PublicUser {
  + User
  - password: str
}

adt Result = Success | Failure

data Success {
  message: str
}

data Failure {
  code: int8
}

service UserService {
  def saveUser(user: User): Result
  def findUserByName(name: str): list[PublicUser] | Failure
}
```

## Quick start

You may use our preconfigured [Docker environment](https://github.com/pshirshov/izumi-docker/blob/master/izumi-env/Dockerfile) to experiment with Izumi IDL compiler:

```bash
docker run -ti --rm septimalmind/izumi-env
```

Then try this snippet:

```bash
export COMPILER="com.github.pshirshov.izumi.r2:idealingua-compiler_2.12:$izumi.version$"
export S_REPOSITORY=https://oss.sonatype.org/content/repositories/snapshots
export R_REPOSITORY=https://oss.sonatype.org/content/repositories/releases

# create sample project in `testproject` directory
coursier launch -E '*:*' -r $S_REPOSITORY -r $R_REPOSITORY $COMPILER -- -i testproject

cd testproject

# compile Scala and Typescript projects using all the defaults
coursier launch -E '*:*' -r S_REPOSITORY -r $R_REPOSITORY $COMPILER -- typescript scala go csharp

# Run SBT on generated Scala project
pushd .
cd target/scala
sbt package
popd

# Run SBT on generated Typescript project
pushd .
cd target/typescript
yarn install
tsc
popd
```



## Pet Store Example

See [izumi-petstore](https://github.com/kaishh/izumi-petstore) for examples in Scala, TypeScript, Go, C# and other languages.

# Installation

## Using SBT Plugin

Add the following to your `project/plugins.sbt` file:

@@@vars

```scala
val izumi_version = "$izumi.version$"
addSbtPlugin("com.github.pshirshov.izumi.r2" % "sbt-idealingua" % izumi_version)
```

@@@

Place your domain definitions into `/src/main/izumi` directory, then enable the plugin for that project. 
For the generated code to compile, you will also need to add dependencies on the Idealingua RTS modules: 

```scala
izumiProject
  .enablePlugins(IdealinguaPlugin)
  .settings(
    libraryDependencies ++= Seq(
        Izumi.R.idealingua_model
      , Izumi.R.idealingua_runtime_rpc
      , Izumi.R.idealingua_runtime_rpc_http4s
      , Izumi.R.idealingua_runtime_rpc_circe
    )
  )
```

You can depend on the code generated by Idealinguain in your other Scala projects:

```scala
project.dependsOn(izumiProject)
```

## Using the standalone compiler

The compiler executable is built as an uberjar and published on [Maven Central](https://search.maven.org/).

The preferred way to install the compiler is with [coursier](https://github.com/coursier/coursier#command-line)

@@@vars

```bash
# install release executable
coursier bootstrap com.github.pshirshov.izumi.r2:idealingua-compiler_2.12:$izumi.version$ -o idlc

./idlc --help
```

@@@

To install snapshot:

```bash
# install snapshot
coursier bootstrap -r https://oss.sonatype.org/content/repositories/snapshots/ com.github.pshirshov.izumi.r2:idealingua-compiler_2.12:0.6.0-SNAPSHOT -o idlc

./idlc --help
```

Commandline examples:

```
./idlc -s src -t target -L scala=* -L typescript=*
```

```
./idlc -s src -t target -L scala=-AnyvalExtension -L typescript=*
```

## Scala http4s Transport

Most likely you will need to use [Kind Projector](https://github.com/non/kind-projector) compiler plugin and enable partial unification:

```scala
scalacOptions += "-Ypartial-unification"

resolvers += Resolver.sonatypeRepo("releases")

addCompilerPlugin("org.spire-math" % "kind-projector" % "0.9.6" cross CrossVersion.binary)
``` 

You may find a test suite for the whole http4s pipeline [here](blob/develop/idealingua/idealingua-runtime-rpc-http4s/src/test/scala/com/github/pshirshov/izumi/idealingua/runtime/rpc/http4s/Http4sServer.scala).

Please note that service definitons for the test suite are _not_ generated from Idealingua definitions, you can find the Scala sources [here](https://github.com/pshirshov/izumi-r2/tree/develop/idealingua/idealingua-test-defs/src/main/scala/com/github/pshirshov/izumi/r2/idealingua/test).

@@@ index

* [Language Syntax and Types Reference](language-reference.md)
* [JSON Wire Format Specification](json.md)
* [Scala Codegen: Examples of generated code in Scala](cogen.md)
* [Scala Codegen: JSON codecs generated by Scala Circe plugin](cogen-circe.md)

@@@
